# Event Loop в JavaScript

## Что такое Event Loop?

Event Loop (цикл событий) — это механизм, который позволяет JavaScript выполнять асинхронные операции, несмотря на то, что сам язык является однопоточным. Event Loop управляет выполнением кода, сбором и обработкой событий, выполнением подзадач очереди.

## Пример работы Event Loop

В этом примере показано, как промисы, finally, catch и микротаски добавляются в очередь выполнения:

```js
Promise.resolve()
  .then(() => console.log(1))
  .then(() => console.log(2))
  .finally(() => console.log(3))
  .then(() => console.log(4))
  .finally(() => console.log(5));

queueMicrotask(() => console.log(9));

Promise.reject()
  .then(() => console.log(6))
  .catch(() => console.log(7))
  .then(() => console.log(8));

// Вывод: 1 9 2 7 3 8 4 5
```

## Объяснение

Тут последовательно из каждого метода идет регистрация в очередь колбеков:

1. **Promise.resolve()** создаёт успешно выполненный промис
2. Каждый `.then()` и `.finally()` добавляет обработчик в очередь микротасков
3. **queueMicrotask()** добавляет задачу в очередь микротасков с высоким приоритетом
4. **Promise.reject()** создаёт отклонённый промис
5. `.catch()` обрабатывает ошибку и добавляет следующий `.then()` в очередь

Микротаски выполняются до следующего тика Event Loop, поэтому они имеют приоритет над обычными задачами.
