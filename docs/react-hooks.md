# React Hooks

Коллекция полезных хуков React для различных задач оптимизации и работы с асинхронными операциями.

## useDeferredValue

**useDeferredValue** - это хук React, который позволяет отложить обновление части пользовательского интерфейса.

- Функция useDeferredValue сама по себе не предотвращает дополнительные сетевые запросы.

- Не существует фиксированной задержки, вызванной самим useDeferredValue. Как только React завершит первоначальный рендеринг, React немедленно начнет работу над фоновым рендерингом с новым отложенным значением. Любые обновления, вызванные событиями (например, вводом текста), будут прерывать фоновый рендеринг и получат приоритет над ним.

- Фоновый рендеринг, вызванный useDeferredValue, не запускает эффекты до тех пор, пока они не будут зафиксированы на экране. Если фоновый рендеринг приостановлен, его Эффекты будут запущены после загрузки данных и обновления пользовательского интерфейса.

**useImperativeHandle** - это хук React, который позволяет вам настроить хэндл-обработчик, отображаемый как ссылка. По сути это прокси для компонента который внутри уже использует свой ref

```js
useImperativeHandle(
    ref,
    () => {
        return {
            focus() {
                inputRef.current.focus();
            },
            scrollIntoView() {
                inputRef.current.scrollIntoView();
            },
        };
    },
    []
);
```

**useInsertionEffect** - это версия useEffect, которая срабатывает перед любыми мутациями DOM.

useInsertionEffect предназначен для авторов библиотек CSS-in-JS. Если вы не работаете над библиотекой CSS-in-JS и вам нужно место для вставки стилей, вам, вероятно, лучше использовать useEffect или useLayoutEffect.

**useSyncExternalStore**  -  это хук React, позволяющий подписаться на внешнее хранилище.

Она возвращает моментальный снимок данных в хранилище. В качестве аргументов необходимо передать две функции:

Функция subscribe должна подписываться на стор и возвращать функцию, которая отписывается.
Функция getSnapshot должна считывать моментальный снимок данных из хранилища.

```js
const isOnline = useSyncExternalStore(
    subscribe,
    getSnapshot
);

function getSnapshot() {
    return navigator.onLine;
}

function subscribe(callback) {
    window.addEventListener('online', callback);
    window.addEventListener('offline', callback);
    return () => {
        window.removeEventListener('online', callback);
        window.removeEventListener('offline', callback);
    };
}
```

**useTransition** - это хук React, который позволяет обновлять состояние без блокировки пользовательского интерфейса.

Функция startTransition, возвращаемая useTransition, позволяет пометить обновление состояния как переход.

**use** - это хук React, который позволяет вам прочитать значение ресурса, например промиса или контекста.

В отличие от всех остальных хуков React, use можно вызывать в циклах и условных операторах, таких как if. Как и другие хуки React, функция, вызывающая use, должна быть компонентом или хуком.

При вызове с Promise хук use интегрируется с Suspense и error boundaries. Компонент, вызывающий use, приостанавливается на время выполнения Promise, переданного use. Если компонент, вызывающий use, обернут в границу Suspense, то будет отображен fallback. После разрешения Promise, Suspense fallback заменяется рендерингом компонентов, использующих данные, возвращенные хуком use. Если промис, переданный в use, отклонен, будет отображен фаллбек ближайшей границы ошибки.
