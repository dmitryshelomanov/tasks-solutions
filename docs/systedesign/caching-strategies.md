# –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ 10-100 —Ä–∞–∑ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞.

---

## üîπ –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ?

### –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑ –∫—ç—à–∞

* **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î**: –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥—ë—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
* **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫**: –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –∑–∞–Ω–∏–º–∞—é—Ç 10-100 –º—Å
* **–î–æ—Ä–æ–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**: –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö
* **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: –ë–î –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

* **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î**: 80-95% –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞
* **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫**: –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∑–∞ <1 –º—Å
* **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤
* **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î = –º–µ–Ω—å—à–µ —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üîπ –¢–∏–ø—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. In-Memory Cache (–í –ø–∞–º—è—Ç–∏)

–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ RAM —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä—ã**: Redis, Memcached, –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à (HashMap)

**–ü–ª—é—Å—ã**:
* –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ (<1 –º—Å)
* –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ú–∏–Ω—É—Å—ã**:
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –æ–±—ä—ë–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç RAM)
* –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
* –ù–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π (–µ—Å–ª–∏ –Ω–µ Redis Cluster)

### 2. Distributed Cache (–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∫—ç—à)

–ö—ç—à —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä—ã**: Redis Cluster, Memcached Cluster

**–ü–ª—é—Å—ã**:
* –ë–æ–ª—å—à–∏–π –æ–±—ä—ë–º (—Å—É–º–º–∞ RAM –≤—Å–µ—Ö —É–∑–ª–æ–≤)
* –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
* –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã**:
* –°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (1-5 –º—Å)
* –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 3. Application Cache (–ö—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

–ö—ç—à –≤—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, LRU cache –≤ –ø–∞–º—è—Ç–∏).

**–ü—Ä–∏–º–µ—Ä—ã**: Caffeine (Java), node-cache (Node.js)

**–ü–ª—é—Å—ã**:
* –ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤
* –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ

**–ú–∏–Ω—É—Å—ã**:
* –ù–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –æ–±—ä—ë–º

### 4. CDN Cache (–ö—ç—à CDN)

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –∫—Ä–∞—é —Å–µ—Ç–∏.

**–ü—Ä–∏–º–µ—Ä—ã**: CloudFlare, AWS CloudFront, Fastly

**–ü–ª—é—Å—ã**:
* –ë–ª–∏–∑–∫–æ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–Ω–∏–∑–∫–∞—è latency)
* –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã

**–ú–∏–Ω—É—Å—ã**:
* –¢–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
* –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π

---

## üîπ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ –∫—ç—à

### 1. Cache Aside (Lazy Loading)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Üí —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –∫—ç—à –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î –∏ —É–¥–∞–ª—è–µ—Ç –∏–∑ –∫—ç—à–∞ (–∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç)

**–ü—Å–µ–≤–¥–æ–∫–æ–¥**:
```python
def get_user(user_id):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    user = cache.get(f"user:{user_id}")
    if user:
        return user
    
    # –ß–∏—Ç–∞–µ–º –∏–∑ –ë–î
    user = db.get_user(user_id)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
    cache.set(f"user:{user_id}", user, ttl=3600)
    return user

def update_user(user_id, data):
    # –û–±–Ω–æ–≤–ª—è–µ–º –ë–î
    db.update_user(user_id, data)
    
    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à
    cache.delete(f"user:{user_id}")
```

**–ü–ª—é—Å—ã**:
* –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
* –ö—ç—à —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
* –û—Ç–∫–∞–∑ –∫—ç—à–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω (–¥–∞–Ω–Ω—ã–µ –≤ –ë–î)

**–ú–∏–Ω—É—Å—ã**:
* Cache miss ‚Üí –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ (–∫—ç—à + –ë–î)
* –í–æ–∑–º–æ–∂–Ω–∞ race condition –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
* –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
* –ß—Ç–µ–Ω–∏–µ –ø—Ä–µ–æ–±–ª–∞–¥–∞–µ—Ç –Ω–∞–¥ –∑–∞–ø–∏—Å—å—é
* –î–∞–Ω–Ω—ã–µ –Ω–µ —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è
* –°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### 2. Write Through

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
1. –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ ‚Üí —Å–Ω–∞—á–∞–ª–∞ –≤ –∫—ç—à, –ø–æ—Ç–æ–º –≤ –ë–î
2. –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ ‚Üí —Ç–æ–ª—å–∫–æ –∏–∑ –∫—ç—à–∞ (–ë–î –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è)

**–ü—Å–µ–≤–¥–æ–∫–æ–¥**:
```python
def update_user(user_id, data):
    # –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
    cache.set(f"user:{user_id}", data, ttl=3600)
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –ë–î
    db.update_user(user_id, data)

def get_user(user_id):
    # –ß–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑ –∫—ç—à–∞
    user = cache.get(f"user:{user_id}")
    if not user:
        # –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ, —á–∏—Ç–∞–µ–º –∏–∑ –ë–î –∏ –∫—ç—à–∏—Ä—É–µ–º
        user = db.get_user(user_id)
        cache.set(f"user:{user_id}", user, ttl=3600)
    return user
```

**–ü–ª—é—Å—ã**:
* –ö—ç—à –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω
* –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
* –ë—ã—Å—Ç—Ä–æ–µ —á—Ç–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –∏–∑ –∫—ç—à–∞)

**–ú–∏–Ω—É—Å—ã**:
* –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å (–∫—ç—à + –ë–î)
* –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç–æ ‚Üí –∑—Ä—è –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –≤ –∫—ç—à–µ

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
* –î–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–æ —á–∏—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏
* –ù—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
* –ù–µ–±–æ–ª—å—à–æ–π –æ–±—ä—ë–º —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. Write Back (Write Behind)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
1. –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ ‚Üí —Ç–æ–ª—å–∫–æ –≤ –∫—ç—à (–±—ã—Å—Ç—Ä–æ)
2. –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (batch –∏–ª–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)

**–ü—Å–µ–≤–¥–æ–∫–æ–¥**:
```python
def update_user(user_id, data):
    # –¢–æ–ª—å–∫–æ –≤ –∫—ç—à (–±—ã—Å—Ç—Ä–æ)
    cache.set(f"user:{user_id}", data, ttl=3600)
    
    # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –ë–î (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å)
    queue.enqueue("update_db", user_id, data)

def get_user(user_id):
    # –ß–∏—Ç–∞–µ–º –∏–∑ –∫—ç—à–∞
    return cache.get(f"user:{user_id}")
```

**–ü–ª—é—Å—ã**:
* –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å
* –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î (batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
* –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã**:
* –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∫—ç—à–∞
* –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
* Eventual consistency (–ë–î –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
* –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
* –ú–æ–∂–Ω–æ –¥–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ—Ç–µ—Ä—é –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* –õ–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 4. Refresh Ahead

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
1. –ö—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL
2. –§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ü—Å–µ–≤–¥–æ–∫–æ–¥**:
```python
def get_user(user_id):
    user = cache.get(f"user:{user_id}")
    
    # –ï—Å–ª–∏ TTL < 10% ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º –≤ —Ñ–æ–Ω–µ
    if cache.ttl(f"user:{user_id}") < 360:  # 10% –æ—Ç 3600
        async_refresh(user_id)
    
    return user
```

**–ü–ª—é—Å—ã**:
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
* –ù–µ—Ç cache miss –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ú–∏–Ω—É—Å—ã**:
* –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
* –ú–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
* –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
* –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–æ—Å—Ç—É–ø–∞

---

## üîπ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### 1. TTL (Time To Live)

–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è.

```python
cache.set("user:123", user_data, ttl=3600)  # 1 —á–∞—Å
```

**–ü–ª—é—Å—ã**: –ü—Ä–æ—Å—Ç–æ—Ç–∞

**–ú–∏–Ω—É—Å—ã**: –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL

#### 2. Explicit Invalidation (–Ø–≤–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è)

–£–¥–∞–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

```python
def update_user(user_id, data):
    db.update_user(user_id, data)
    cache.delete(f"user:{user_id}")  # –Ø–≤–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
```

**–ü–ª—é—Å—ã**: –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ú–∏–Ω—É—Å—ã**: –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å —É–¥–∞–ª—è—Ç—å –∫—ç—à

#### 3. Event-Based Invalidation (–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º)

–ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ message queue).

```python
# –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
event_bus.publish("user.updated", user_id)

# –°–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏—è
@event_bus.on("user.updated")
def invalidate_cache(user_id):
    cache.delete(f"user:{user_id}")
```

**–ü–ª—é—Å—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ú–∏–Ω—É—Å—ã**: –°–ª–æ–∂–Ω–µ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### 4. Version-Based (–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

–ö—ç—à —Ö—Ä–∞–Ω–∏—Ç –≤–µ—Ä—Å–∏—é –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏—è –º–µ–Ω—è–µ—Ç—Å—è.

```python
def get_user(user_id):
    version = cache.get(f"user:{user_id}:version")
    user = cache.get(f"user:{user_id}:v{version}")
    return user

def update_user(user_id, data):
    new_version = cache.incr(f"user:{user_id}:version")
    cache.set(f"user:{user_id}:v{new_version}", data)
```

**–ü–ª—é—Å—ã**: –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏–π

**–ú–∏–Ω—É—Å—ã**: –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –≤ –∫—ç—à–µ

---

## üîπ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Cache-Aside Pattern

–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω (–æ–ø–∏—Å–∞–Ω –≤—ã—à–µ).

### 2. Read-Through Pattern

–ö—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –ø—Ä–∏ miss.

```python
# –ö—ç—à —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ –ë–î
user = cache.get_or_load("user:123", loader=db.get_user)
```

### 3. Write-Through Pattern

–û–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ.

### 4. Write-Behind Pattern

–û–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ.

---

## üîπ –ß—Ç–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å?

### ‚úÖ –•–æ—Ä–æ—à–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å

* **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: —Å–ø–∏—Å–∫–∏ –≥–æ—Ä–æ–¥–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
* **–ß–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
* **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π**: –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
* **–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: session data –≤ Redis
* **HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –¥–ª—è SSR (Server-Side Rendering)

### ‚ùå –ü–ª–æ—Ö–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å

* **–ß–∞—Å—Ç–æ –º–µ–Ω—è—é—â–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ**: —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫—É—Ä—å–µ—Ä–∞
* **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞ (–Ω—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
* **–ë–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö**: –≤–∏–¥–µ–æ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ª—É—á—à–µ CDN)
* **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏

---

## üîπ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤

```python
def get_restaurants(city):
    cache_key = f"restaurants:{city}"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    restaurants = cache.get(cache_key)
    if restaurants:
        return restaurants
    
    # –ß–∏—Ç–∞–µ–º –∏–∑ –ë–î
    restaurants = db.get_restaurants_by_city(city)
    
    # –ö—ç—à–∏—Ä—É–µ–º –Ω–∞ 5 –º–∏–Ω—É—Ç
    cache.set(cache_key, restaurants, ttl=300)
    
    return restaurants

def add_restaurant(city, restaurant):
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
    db.add_restaurant(restaurant)
    
    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à
    cache.delete(f"restaurants:{city}")
```

### –ü—Ä–∏–º–µ—Ä 2: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ–ø—Ä–æ—Å–∞ (Stack Overflow)

```python
def get_question(question_id):
    cache_key = f"question:{question_id}"
    
    question = cache.get(cache_key)
    if question:
        return question
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –ë–î
    question = db.get_question_with_answers(question_id)
    
    # –ö—ç—à–∏—Ä—É–µ–º –Ω–∞ 10 –º–∏–Ω—É—Ç
    cache.set(cache_key, question, ttl=600)
    
    return question

def add_answer(question_id, answer):
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
    db.add_answer(answer)
    
    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à –≤–æ–ø—Ä–æ—Å–∞
    cache.delete(f"question:{question_id}")
```

---

## üîπ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

* **Cache Hit Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à (—Ü–µ–ª—å: >80%)
* **Cache Miss Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–º–∞—Ö–æ–≤
* **Latency** ‚Äî –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∫—ç—à–∞
* **Memory Usage** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
* **Eviction Rate** ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞

```
Cache Hit Rate: 85%
Average Latency: 0.5 ms
Memory Usage: 12 GB / 16 GB
Evictions per minute: 50
```

---

## üí° Best Practices

1. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–π TTL**: –Ω–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π (–Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î), –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ)
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–µ—Ä–∞—Ä—Ö–∏—é –∫—ç—à–µ–π**: L1 (–ª–æ–∫–∞–ª—å–Ω—ã–π) ‚Üí L2 (Redis) ‚Üí –ë–î
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ cache hit rate**: –µ—Å–ª–∏ <70% ‚Äî –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
4. **–ö—ç—à–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö**: application cache + distributed cache + CDN
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏**: –ø–æ–Ω—è—Ç–Ω—ã–µ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ, —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
6. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ cache stampede**: –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –∏—Å—Ç–µ—á–µ–Ω–∏–∏ TTL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ locks

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

* [CAP —Ç–µ–æ—Ä–µ–º–∞ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å](./cap-theorem.md) ‚Äî –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ –∫—ç—à–µ
* [–¢–∏–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö](./database-types.md) ‚Äî –≤—ã–±–æ—Ä –ë–î –∏ –∫—ç—à–∞
* [–û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤](./load-estimation.md) ‚Äî –∫–∞–∫ –∫—ç—à —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É

