# Прототипное наследование в JavaScript

## `__proto__`
- Специальное свойство объектов в JavaScript.
- Является ссылкой на прототип (prototype) функции-конструктора, которая создала данный объект.
- Формирует цепочку прототипов.

Пример:

```javascript
var a = [];

console.log(a.__proto__); 
// [at: ƒ, concat: ƒ, copyWithin: ƒ, fill: ƒ, find: ƒ, ...]

console.log(Array.prototype);
// [at: ƒ, concat: ƒ, copyWithin: ƒ, fill: ƒ, find: ƒ, ...]

console.log(a.__proto__ === Array.prototype); // true
```

## Важно:

- __proto__ - это нестандартный способ доступа к прототипу объекта
- Рекомендуется использовать методы Object.getPrototypeOf() и Object.setPrototypeOf()
prototype
- Свойство, присутствующее только у функций
- Содержит объект с методами и свойствами, которые будут унаследованы экземплярами
- Используется при создании новых объектов через new

```javascript
function Person(name) {
    this.name = name;
}

Person.prototype.greet = function() {
    console.log(`Hello, my name is ${this.name}`);
};

const person = new Person('John');
person.greet(); // "Hello, my name is John"
```

## Цепочка прототипов

- Каждый объект имеет внутреннюю ссылку на свой прототип
- Прототип сам может иметь свой прототип, образуя цепочку
- Поиск свойств происходит по цепочке вверх до null

```js
const obj = {};
// obj.__proto__ -> Object.prototype
// Object.prototype.__proto__ -> null
```

## Особенности цепочки прототипов:

- Потомок связан с родителем через свойство __proto__, которое указывает на свойство prototype родителя.
- В свою очередь, prototype родителя может иметь собственную ссылку __proto__, указывающую на его родителя.
- Такая связь называется цепочка прототипов , а сам механизм такого наследования называется прототипное наследование .

## Современные методы работы с прототипами

- Для работы с прототипами рекомендуется использовать следующие методы:

```js
// Получение прототипа объекта
Object.getPrototypeOf(obj);

// Установка прототипа объекта
Object.setPrototypeOf(obj, newProto);

// Создание объекта с заданным прототипом
Object.create(proto);
```

## Важные замечания

1) Не рекомендуется напрямую модифицировать __proto__, так как:

 - Это может привести к проблемам с производительностью[^4].
 - Может нарушить работу некоторых оптимизаций движка JavaScript[^5].

2) Для проверки наличия свойства в цепочке прототипов используйте:

```js
'property' in object; // проверяет всю цепочку
object.hasOwnProperty('property'); // проверяет только собственные свойства
```

3) Понимание прототипного наследования важно для:

- Эффективной работы с объектами[^6].
- Создания эффективных структур данных.
- Оптимизации производительности.
- Понимания работы библиотек и фреймворков.

## Примечания

- [^1]: __proto__ считается устаревшим и не рекомендуется к использованию в современном коде.
- [^2]: Методы Object.getPrototypeOf() и Object.setPrototypeOf() являются стандартными и предпочтительными для работы с прототипами.
- [^3]: Только функции имеют свойство prototype. Обычные объекты не имеют этого свойства.
- [^4]: Модификация __proto__ может вызвать дополнительные вычисления в движке JavaScript, что снижает производительность.
- [^5]: Некоторые оптимизации движка JavaScript могут быть отключены при использовании __proto__.
- [^6]: Прототипное наследование является основой объектно-ориентированного программирования в JavaScript.
